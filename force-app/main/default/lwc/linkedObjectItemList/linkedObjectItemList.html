<template>
    <lightning-card>
        <span slot="title">{title}</span>
        <template if:true={canCreateFilters}>
            <lightning-button-menu slot="actions" icon-name="utility:add" alternative-text="Add" variant="border-filled" class="slds-m-left_medium" onselect={handleMenuSelection}>
                <lightning-menu-item label={labels.addNew.label} value="addNew"></lightning-menu-item>
                <lightning-menu-divider></lightning-menu-divider>
                <template for:each={marketItems} for:item="mi">
                    <lightning-menu-item key={mi.id} label={mi.label} value={mi.id}></lightning-menu-item>
                </template>
            </lightning-button-menu>
            <!--<lightning-button-icon slot="actions" icon-name="utility:add" alternative-text="Add" onclick={addNewItem} class="slds-m-left_medium"></lightning-button-icon>-->
        </template>

        <template if:true={isWorking}>
            <lightning-spinner alternative-text="loading" size="small" ></lightning-spinner>
        </template>
        <div class="slds-p-vertical_small">
            <ul class="bottom-space">
                <template for:each={items} for:item="item" for:index="index">
                    <li key={item.Id} class="slds-item slds-p-vertical_xx-small">
                        <c-linked-object-item item-index={index}
                                                bf-config={bfConfig}
                                                source-object={sourceObject}
                                                source-object-info={sourceObjectInfo}
                                                source-object-fields={sourceObjectFields}
                                                linked-object={linkedObject}
                                                linked-object-info={linkedObjectInfo}
                                                linked-object-fields={linkedObjectFields}
                                                item={item} 
                                                can-edit={canEdit}
                                                oncancel={handleCancelEdit}>
                        </c-linked-object-item>
                    </li>
                </template>
            </ul>                            
        </div>
    </lightning-card>
</template>